<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Chris Dornan - Functor</title>
        <link rel="stylesheet" href="../assets/scss/site.css" />
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="../apple-touch-icon.png" />
    </head>
    <body>
        <header class="uk-section-secondary" uk-sticky>

    <nav class="uk-navbar" uk-navbar style="display: flex; justify-content: space-between;">
        <ul class="uk-navbar-nav">
            <li><a href="../"><span uk-icon="home"></span>&nbsp;Chris Dornan</a></li>
        </ul>
        <div class="uk-navbar-flip">
            <ul class="uk-navbar-nav">
                <li><a href="../pages/about.html"><span uk-icon="info"></span>&nbsp;About</a></li>
                <li>
                    <a href="#"><span uk-icon="menu"></span>Series</a>
                    <div class="uk-navbar-dropdown">
                        <ul class="uk-nav uk-navbar-dropdown-nav">
                            <li><a class="cd-nav-dropdown-a" href="../pages/extension-reviews.html">Extension Reviews</a></li>
                        </ul>
                        <ul class="uk-nav uk-navbar-dropdown-nav">
                            <li><a class="cd-nav-dropdown-a" href="../pages/package-reviews.html">Package Reviews</a></li>
                        </ul>
                        <ul class="uk-nav uk-navbar-dropdown-nav">
                            <li><a class="cd-nav-dropdown-a" href="../pages/structure-reviews.html">Structure Reviews</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="../pages/archive.html"><span uk-icon="database"></span>&nbsp;Archives</a></li>
                <li><a href="../rss.xml"><span uk-icon="rss"></span>&nbsp;RSS</a></li>
                <li><a href="../atom.xml"><span uk-icon="rss"></span>&nbsp;Atom</a></li>
            </ul>
        </div>
    </nav>

</header>
<div class="uk-margin"></div>


        <main uk-height-viewport="expand: true">
          <div class="uk-container cd-article-container cd-running-font">
            <article class="uk-article">
    <h1 class="uk-article-title">Functor</h1>
    <p class="uk-subtitle" style="font-style:italic;">The basis of things to come</p>
    <p class="uk-article-meta">
        Posted on 2020-04-05
        
    </p>
    <hr />
<div class="cd-sr-row"><div class="cd-sr-name">Functor</div>
<div class="cd-sr-date"><a title="the article" href="../posts/2020-04-05-sr-Functor.html">2020-04-05</a></div>
<div class="cd-sr-home"><a title="Hackage page" href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html"><span uk-icon="home"></span></a></div>
<a title="the article" class="cd-sr-block-link" href="../posts/2020-04-05-sr-Functor.html">
<div class="cd-sr-strs">
<svg height="25" width="23" class="cd-star">
  <polygon points="9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78" style="fill-rule:nonzero; fill: #ffd055;"></polygon>
</svg>
<svg height="25" width="23" class="cd-star">
  <polygon points="9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78" style="fill-rule:nonzero; fill: #ffd055;"></polygon>
</svg>
<svg height="25" width="23" class="cd-star">
  <polygon points="9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78" style="fill-rule:nonzero; fill: #ffd055;"></polygon>
</svg>
<svg height="25" width="23" class="cd-star">
  <polygon points="9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78" style="fill-rule:nonzero; fill: #ffd055;"></polygon>
</svg>
<svg height="25" width="23" class="cd-star">
  <polygon points="9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78" style="fill-rule:nonzero; fill: #ffd055;"></polygon>
</svg>
<svg height="25" width="23" class="cd-star">
  <polygon points="9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78" style="fill-rule:nonzero; fill: #ffd055; visibility: visible;"></polygon>
</svg>
</div>
</a>
</div>
<hr />

    <p><em>[This article was expanded on 2020-04-06.]</em></p>
<p>The first place to look for an introduction to any structure is <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html">Hackage</a>, which covers <code>Functor</code> pretty well. Consider this article a commentary on that page.</p>
<p>There we are told Functors are:</p>
<blockquote>
<p>uniform action over a parameterized type, generalizing the map function on lists.</p>
</blockquote>
<p>The class provides a single higher order method for converting the parameter type of the functor.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="dt">Functor</span> f <span class="kw">where</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  fmap ::</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> f a <span class="ot">-&gt;</span> f b</span></code></pre></div>
<p>If the transformer function, <code>f</code> is of type <code>Foo-&gt;Bar</code> then <code>fmap f</code> will convert <code>Baz Foo</code> values into <code>Baz Bar</code> values.</p>
<p>Often the <code>&lt;$&gt;</code> operator is used. It is but an alias for <code>fmap</code>.</p>
<p>Functors are really quite primal and I would advise anyone starting out with Haskell prioritising getting used using them, stacks of them. If you have an <code>IO</code> action that returns a <code>Maybe String</code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ot">my_action ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> (<span class="dt">Maybe</span> <span class="dt">String</span>)</span></code></pre></div>
<p>but you need a <code>Maybe T.Text</code> then this should be quite natural (bearing in mind that, like many useful types, <code>IO</code> and <code>Maybe</code> are functors):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>txt <span class="ot">&lt;-</span> <span class="fu">fmap</span> T.pack <span class="op">&lt;$&gt;</span> my_action <span class="dv">42</span></span></code></pre></div>
<p>Of course <code>fmap T.pack</code> (in this context) is of type</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> T.pack<span class="ot"> ::</span> <span class="dt">Maybe</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> <span class="dt">T.Text</span></span></code></pre></div>
<p>which is just a function we can apply as an argument to <code>fmap</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> (<span class="fu">fmap</span> T.pack)<span class="ot"> ::</span> <span class="dt">IO</span> (<span class="dt">Maybe</span> <span class="dt">String</span>) <span class="ot">-&gt;</span> <span class="dt">IO</span> (<span class="dt">Maybe</span> <span class="dt">T.Text</span>)</span></code></pre></div>
<p>and so,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> (<span class="fu">fmap</span> T.pack) (my_action <span class="dv">42</span>)<span class="ot"> ::</span> <span class="dt">IO</span> (<span class="dt">Maybe</span> <span class="dt">T.Text</span>)</span></code></pre></div>
<p>but <code>fmap</code> and <code>&lt;$&gt;</code> are the same function (in the standard <code>Prelude</code> anyway) so this is equivalent to:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> T.pack <span class="op">&lt;$&gt;</span> my_action <span class="dv">42</span><span class="ot"> ::</span> <span class="dt">IO</span> (<span class="dt">Maybe</span> <span class="dt">T.Text</span>)</span></code></pre></div>
<p>[Notice the way that whole explanation of stacked functors took place entirely in the land of types â€” this is a central feature of Haskell that every Haskell program or fragment has a dual life: a static life in types and a dynamic life at runtime.]</p>
<p>The above pattern is so pervasive that it is worth getting familiar with, especially in an <code>IO</code> context. <code>f &lt;$&gt; action</code> (or <code>fmap f action</code>) applies some arbitrary function <code>f</code> to the output of the <code>IO</code> <code>action</code>.</p>
<p>But this is bur a single pattern. Functors can be applied pretty much anywhere.</p>
<h2 id="other-operators">Other Operators</h2>
<p>Functor provides some useful auxiliary operators and functions.</p>
<h3 id="section">(&lt;$)</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ot">(&lt;$) ::</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> f b <span class="ot">-&gt;</span> f a</span></code></pre></div>
<p>is equivalent to this</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>c (<span class="op">&lt;$</span>) s <span class="ot">=</span> <span class="fu">const</span> c <span class="op">&lt;$&gt;</span> s</span></code></pre></div>
<p>forcing the output of <code>s</code> to a constant value:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- | uses `getLine` to read a line from stdin and discards it</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ot">discardLine ::</span> <span class="dt">IO</span> ()</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>discardLine <span class="ot">=</span> () <span class="op">&lt;$</span> <span class="fu">getLine</span></span></code></pre></div>
<h3 id="section-1">($&gt;)</h3>
<p>This operator</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ot">($&gt;) ::</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> f a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> f b</span></code></pre></div>
<p>is the same operator as <code>&lt;$</code>, but with its arguments flipped:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">$&gt;</span> c <span class="ot">=</span> c <span class="op">&lt;$</span> s</span></code></pre></div>
<p>so we could have written above:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- | uses `getLine` to read a line from stdin and discards it</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ot">discardLine ::</span> <span class="dt">IO</span> ()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>discardLine <span class="ot">=</span> <span class="fu">getLine</span> <span class="op">$&gt;</span> ()</span></code></pre></div>
<h3 id="section-2">(&lt;&amp;&gt;)</h3>
<p>This operator,</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ot">(&lt;&amp;&gt;) ::</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> f a <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> f b</span></code></pre></div>
<p>is a flipped version of <code>($&gt;)</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">&lt;&amp;&gt;</span> f <span class="ot">=</span> f <span class="op">&lt;$&gt;</span> s</span></code></pre></div>
<p>so we can say</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">Data.Char</span> (toUpper)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- | read string from stdin, mapping each char to upper case</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="ot">getUpper ::</span> <span class="dt">IO</span> <span class="dt">String</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>getUpper <span class="ot">=</span> readLine <span class="op">&lt;&amp;&gt;</span> <span class="fu">map</span> <span class="fu">toUpper</span></span></code></pre></div>
<h3 id="void">void</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ot">void ::</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> f a <span class="ot">-&gt;</span> f ()</span></code></pre></div>
<p>This is just a special case of <code>&lt;$</code> (or <code>$&gt;</code>) that force the output of the functor to the unit type <code>()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>void s <span class="ot">=</span> () <span class="op">&lt;$</span> s</span></code></pre></div>
<p>Above, e could have written:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- | uses `getLine` to read a line from stdin and discards it</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ot">discardLine ::</span> <span class="dt">IO</span> ()</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>discardLine <span class="ot">=</span> void <span class="fu">getLine</span></span></code></pre></div>
<h2 id="best-is-yet-to-come">Best is yet to come</h2>
<p>In [the notes for <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html#v:-60--36--62-"><code>($)</code></a> on the Hackage <code>Functor</code> page notes the symmetries between the function application operator <code>($)</code> and <code>(&lt;$&gt;)</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>( <span class="op">$</span> )<span class="ot"> ::</span>              (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span>   a <span class="ot">-&gt;</span>   b</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ot">(&lt;$&gt;) ::</span> <span class="dt">Functor</span> f <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> f a <span class="ot">-&gt;</span> f b</span></code></pre></div>
<p>This is not accidental and totally in keeping with the way it is used, including the examples at the top of this article.</p>
<p>Just as <code>($)</code> can be used to transform the output of a function, so <code>(&lt;$&gt;)</code> can be used to transform the output of a Functor.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">Data.Char</span>            (toLower)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="dt">System.Environment</span>   (getEnv)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Env</span> <span class="ot">=</span> <span class="dt">Env</span> {<span class="ot"> envLabel ::</span> <span class="dt">String</span> }</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="ot">prjLabel ::</span> <span class="dt">Env</span>    <span class="ot">-&gt;</span>    <span class="dt">String</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="ot">getLabel ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> <span class="dt">String</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>prjLabel env <span class="ot">=</span> <span class="fu">map</span> <span class="fu">toLower</span>  <span class="op">$</span>  envLabel env</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>getLabel nme <span class="ot">=</span> <span class="fu">map</span> <span class="fu">toLower</span> <span class="op">&lt;$&gt;</span> getEnv   nme</span></code></pre></div>
<p>But hold on a minute, arenâ€™t we getting ahead of ourselves, <code>getEnv</code> is an <code>IO</code>, a famous monad, not a Functor? But all monads are applicatives and all applicatives are functors, so monads are functors of course.</p>
<p>Everything we are saying about functors is true of applicatives (and monads), and everything we say about applicatives will be true of monads. This compositional understanding is important to understanding the big picture, and as we can see it provides an accessible place to start.</p>
<h2 id="identities">Identities</h2>
<p>Functors come from abstract algebra and, as we are reminded at the top of the <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html#t:Functor">top Functor Hackage page</a>, where they are characterised by the following identities.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span>    <span class="fu">id</span>    <span class="op">==</span>  <span class="fu">id</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> (f <span class="op">.</span> g)  <span class="op">==</span>  <span class="fu">fmap</span> f <span class="op">.</span> <span class="fu">fmap</span> g</span></code></pre></div>
<p>That these simple identities (along with those for the other structures) can give rise to all of this is truly a wonderous thing!</p>
    <hr>
    <p><i>Got an issue with any of this?</i>
       <a href="https://github.com/cdornan/cd-blog/issues/10">Please share</a>
       or drop me a line (see below).
<div class="uk-margin-small-top"></div>
</article>

          </div>
        </main>

        <footer class="cd-footer uk-section uk-section-secondary">
          <div class="uk-container">
            <div class="uk-grid-medium uk-child-width-1-3@m uk-child-width-1-1" uk-grid>
              <div style="text-align: center;">
                <h4 class>Contact</h3>
                <p><span uk-icon="mail"></span> <a href="mailto:chris@chrisdornan.com">chris@chrisdornan.com</a></p>
                <p><span uk-icon="github"></span> <a href="https://github.com/cdornan">cdornan</a></p>
                <p><span uk-icon="twitter"></span> <a href="https://twitter.com/cdornan">cdornan</a></p>
              </div>
              <div style="text-align: center;">
                <h4 class>Blog</h3>
                <p><span uk-icon="home"></span> <a href="../">Home</a></p>
                <p><span uk-icon="info"></span> <a href="../contact.html">About</a></p>
                <p><span uk-icon="code"></span> <a href="https://github.com/cdornan/cd-blog">Code</a></p>
                </p>
              </div>
              <div style="text-align: center;">
                <h4 class>Credits</h3>
                <p><img data-src="/assets/images/lambda.png" uk-img>Built with <a href="https://jaspervdj.be/hakyll/">Hakyll</a></p>
                </p>
              </div>
            </div>
          </div>
        </footer>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145166163-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-145166163-1');
        </script>
        <script src="https://getuikit.com/assets/uikit/dist/js/uikit.js"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.3.7/js/uikit.min.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.3.7/js/uikit-icons.min.js"></script>
    </body>
</html>
