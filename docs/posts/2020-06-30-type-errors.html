<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Chris Dornan - Type Errors</title>
        <link rel="stylesheet" href="../assets/scss/site.css" />
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="../apple-touch-icon.png" />
    </head>
    <body>
        <header class="uk-section-secondary" uk-sticky>

    <nav class="uk-navbar" uk-navbar style="display: flex; justify-content: space-between;">
        <ul class="uk-navbar-nav">
            <li><a href="../"><span uk-icon="home"></span>&nbsp;Chris Dornan</a></li>
        </ul>
        <div class="uk-navbar-flip">
            <ul class="uk-navbar-nav">
                <li><a href="../pages/about.html"><span uk-icon="info"></span>&nbsp;About</a></li>
                <li>
                    <a href="#"><span uk-icon="menu"></span>Series</a>
                    <div class="uk-navbar-dropdown">
                        <ul class="uk-nav uk-navbar-dropdown-nav">
                            <li><a class="cd-nav-dropdown-a" href="../pages/extension-reviews.html">Extension Reviews</a></li>
                        </ul>
                        <ul class="uk-nav uk-navbar-dropdown-nav">
                            <li><a class="cd-nav-dropdown-a" href="../pages/package-reviews.html">Package Reviews</a></li>
                        </ul>
                        <ul class="uk-nav uk-navbar-dropdown-nav">
                            <li><a class="cd-nav-dropdown-a" href="../pages/structure-reviews.html">Structure Reviews</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="../pages/archive.html"><span uk-icon="database"></span>&nbsp;Archives</a></li>
                <li><a href="../rss.xml"><span uk-icon="rss"></span>&nbsp;RSS</a></li>
                <li><a href="../atom.xml"><span uk-icon="rss"></span>&nbsp;Atom</a></li>
            </ul>
        </div>
    </nav>

</header>
<div class="uk-margin"></div>


        <main uk-height-viewport="expand: true">
          <div class="uk-container cd-article-container cd-running-font">
            <article class="uk-article">
    <h1 class="uk-article-title">Type Errors</h1>
    <p class="uk-subtitle" style="font-style:italic;">the secret confessions of a Haskeller</p>
    <p class="uk-article-meta">
        Posted on 2020-06-30
        
    </p>
    
    <blockquote>
<p>Our deepest fears are like dragons guarding our deepest treasure.</p>
<p>— Rainer Maria Rilke</p>
</blockquote>
<p>I remember in my postgraduate days a lecturer remarking that there was a real problem with students resenting Haskell type errors. I suggested that they should be on their knees in gratitude for each of these static errors but was told that that wasn’t an option!</p>
<p>That was way back when, in the early days of Haskell, when (1) errors were simpler (because the type constructions used by packages were much simpler) but also (2) much less effort had been expended in making error messages informative.</p>
<p>This issue really hasn’t gone away in the meantime, but I have been trying to get to the bottom of this basic frustration by paying attention to my own frustration when the <del>messenger</del> compiler let’s me know that I have been a tribute act to those <a href="https://en.wikipedia.org/wiki/Infinite_monkey_theorem">proverbial random monkeys</a> trying to write <del>Hamlet</del> solid Haskell.</p>
<p>Of course, the frustrations of an experienced developer are not of much consequence. I have been <em>got at</em>, suitably indoctrinated, and know why it is all cool, but those in the early stages of trying out Haskell won’t have the benefits of that perspective hard earned from lived experience.</p>
<p>But if experienced Haskellers could explain why type errors can be frustrating from their own experience it could be useful. Something that would certainly not be useful is any idea that feelings of frustration with compiler errors is merely the mark noobs and bozos, and not the experience of accomplished masters of the universe that know just enough to keep quiet about frustrating experiences with the compiler.</p>
<h2 id="what-happens-anatomy-of-a-type-error">What Happens: anatomy of a type error</h2>
<p>You have been hacking for fourteen days straight on this unbelievably brilliant package, using language extensions that you didn’t even know existed at the start. Now all you need to do is to (finally) let the compiler in on your brilliance, but wait, what is this I see? a quite incomprehensible type error! You gaze at it in horror — I don’t have time for this! Looking at the breakdown, none of the things it is saying are making any sense, the types of the sub-terms are not what they should be and the message is incomprehensible. I mean I <em>almost</em> understood that language extension!</p>
<h2 id="what-is-it-telling-me">What is it telling me?</h2>
<p>The compiler has called you on you simian coding techniques and the natural reaction to being called out is to resent that which is calling you out bearing in mind that you have as yet very little perspective. In this situation it it the most natural thing in the world to blame the tools.</p>
<h2 id="why">Why?</h2>
<p>This does really happen so very often in a big way, but it does from time to time. (if it never happens could it be an indication of an overly conservative approach to writing code?) But it has become clear to me that my episodes with frustration correlated with certain factors, and the times where everything went smoothly contrasting factors where in play.</p>
<ul>
<li><p><strong>Impatience</strong>: it goes without saying that frustration are going to arise from an impatient state of mind. In the opposite state of mind, when things are more spacious, surprises tend to give rise to curiosity not frustration.</p></li>
<li><p><strong>Not doing research</strong>: when impatient, there is no time to research new</p></li>
<li><p>techniques and technologies, giving rise to surprises.</p></li>
<li><p><strong>Not breaking things down properly</strong>: when impatient things are not broken down properly, monolitchic designs are favoured, corners are cut, minimising visibility (statically and dynamically) of what is going on.</p></li>
<li><p><strong>Not writing out all of the type signatures</strong>: it goes without saying that the impatient mind has very little truck with superfluous type signatures.</p></li>
</ul>
<h2 id="two-conclusions">Two conclusions</h2>
<p>Now there are different ways this will manifest depending upon the kinds of programs you write, but I hope there is some familiarity about this, even if you have to adjust for your own contexts.</p>
<p>Two things.</p>
<h3 id="for-beginners-it-is-harder-and-they-have-less-choice">For beginners it is harder and they have less choice</h3>
<p>Experienced Haskellers might create the conditions for incomprehensible errors as a result of work pressure but novice Haskellers don’t have the experience and knowledge to avoid these problems and are naturally stressed out, making it even harder to avoid the impatient state of mind.</p>
<h3 id="everyone-should-be-on-their-knees">Everyone should be on their knees!</h3>
<p>However unpleasant the experience, it is really, really good to get feedback, that something is wrong, as early as possible, before bad habits have set in (for beginners) or (for developers in the field) the bad design has a chance to spread through the whole system poisoning other sub-systems and effecting end users, future maintainers, etc.</p>
<h2 id="dealing-with-frustration">Dealing with frustration</h2>
<p>These are some of the ways I have dealt with compiler surpises.</p>
<ul>
<li><p>The first thing to do is to recognise what is happening, that the impatience is the source of the problem, kick back take an analytic approach. If you are under time pressure and structural mistakes have been made, ignoring those mistakes will not help in completing the task faster. Even when everything is generally sound a less reactive more analytical approach will provide a surer route to the source of the problem.</p></li>
<li><p>Review the component that is causing the trouble — have corners been cut? If so what can be reasonably done in the time available to reach a better compromise between pragmatism and (good) principles? Are all the technologies (e.g., packages, language extensions) thoroughly understood? Are there references, articles or similar examples that can help?</p></li>
<li><p>Are there large constructions with mysterious interiors — large complicated function definitions or expressions in which the types of major sub-components are not specified?</p></li>
<li><p>When a review or rebuild is not appropriate it is a good idea to start swapping out components and replacing them with stubs with type signatures, until the source of the problem becomes apparent.</p></li>
<li><p>Most valuable, of course, is to gain insight into what has led to break down and so avoid it in the future.</p></li>
</ul>
<p>I really do find that when I am <em>not</em> pushing the envelope and writing solid code in a progressive fashion (be it bottom-up, top-down, middle-out or whatever), drip feeding the emerging type-signature-laden code into the compiler, I encounter very few surprises from the type checker.</p>
<p>Of course these techniques will be familiar to all developers, including developers working with non-statically typed languages, because they are the techniques all developers use to deal with surprising program behaviour, so we should not be amazed at their salience where type-level programming is involved. To have your flow unexpectedly disrupted by the compiler can be difficult to take — at whatever level — but really it is quite marvellous that all of this is taking place so early in the development cycle.</p>
<p>Haskellers might have been fearing these type error frustrations but maybe they could be guarding our deepest treasure.</p>
<p>(But, of course, it is important to continue improving Haskell error diagnostics.)</p>
    <hr>
    <p><i>Got an issue with any of this?</i>
       <a href="https://github.com/cdornan/cd-blog/issues/32">Please share</a>
       or drop me a line (see below).
<div class="uk-margin-small-top"></div>
</article>

          </div>
        </main>

        <footer class="cd-footer uk-section uk-section-secondary">
          <div class="uk-container">
            <div class="uk-grid-medium uk-child-width-1-3@m uk-child-width-1-1" uk-grid>
              <div style="text-align: center;">
                <h4 class>Contact</h3>
                <p><span uk-icon="mail"></span> <a href="mailto:chris@chrisdornan.com">chris@chrisdornan.com</a></p>
                <p><span uk-icon="github"></span> <a href="https://github.com/cdornan">cdornan</a></p>
                <p><span uk-icon="twitter"></span> <a href="https://twitter.com/cdornan">cdornan</a></p>
              </div>
              <div style="text-align: center;">
                <h4 class>Blog</h3>
                <p><span uk-icon="home"></span> <a href="../">Home</a></p>
                <p><span uk-icon="info"></span> <a href="../contact.html">About</a></p>
                <p><span uk-icon="code"></span> <a href="https://github.com/cdornan/cd-blog">Code</a></p>
                </p>
              </div>
              <div style="text-align: center;">
                <h4 class>Credits</h3>
                <p><img data-src="/assets/images/lambda.png" uk-img>Built with <a href="https://jaspervdj.be/hakyll/">Hakyll</a></p>
                </p>
              </div>
            </div>
          </div>
        </footer>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145166163-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-145166163-1');
        </script>
        <script src="https://getuikit.com/assets/uikit/dist/js/uikit.js"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.3.7/js/uikit.min.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.3.7/js/uikit-icons.min.js"></script>
    </body>
</html>
